const CACHE_NAME="reversi-web-20250510032935",urlsToCache=["/","/ai/","/en/","/en/ai/","/offline.html","/en/offline.html","/strategy-reversi-othello.html","/en/strategy-reversi-othello.html","/static/game/images/favicon/favicon.ico","/static/game/images/favicon/favicon-16x16.png","/static/game/images/favicon/favicon-32x32.png","/static/game/images/icons/apple-touch-icon.png","/static/game/images/icons/reversi_icon-large.png","/static/game/images/icons/reversi_icon-min.png","/static/game/images/qr.svg","/static/game/images/share.svg","/static/game/images/draw.png","/static/game/images/win.png","/static/game/images/lose.png","/static/game/images/iOSinstall.webp","/static/game/images/info.svg","/static/game/images/laurel.webp","/static/game/sounds/defeat.mp3","/static/game/sounds/victory.mp3","/static/game/sounds/place-stone.mp3","/static/game/sounds/playerJoin.mp3","/static/game/sounds/warning.mp3","/static/game/style.min.css","/static/game/strategy.css","/static/game/script.min.js","/static/game/online.min.js","/static/game/ai.min.js","/static/game/worker.min.js","/static/game/signup.css","/static/game/login.css","/static/game/payment_success.css","/static/game/confetti.browser.min.js"];self.addEventListener("install",e=>{self.skipWaiting(),e.waitUntil(caches.open(CACHE_NAME).then(t=>(console.log(`Service Worker: Caching all assets (${CACHE_NAME})`),t.addAll(urlsToCache))))}),self.addEventListener("fetch",e=>{const t=new URL(e.request.url),s=["/login/","/signup/","/logout/","/premium-intent/"],n=/^\/([a-z]{2}\/)?api\//.test(t.pathname);s.includes(t.pathname)||n||e.request.method!=="GET"||t.origin!==self.location.origin||e.respondWith(caches.match(e.request).then(i=>i||fetch(e.request).then(a=>(a.status===200&&caches.open(CACHE_NAME).then(c=>{c.put(e.request,a.clone())}),a)).catch(()=>i)))}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(t=>Promise.all(t.filter(s=>s.startsWith("reversi-web-")&&s!==CACHE_NAME).map(s=>(console.log(`Service Worker: Deleting old cache (${s})`),caches.delete(s))))).then(()=>self.clients.claim()))});
