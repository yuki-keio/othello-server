{% load static i18n %}
<!DOCTYPE html>
<html lang="{{ request.LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--Critical CSS-->
    <style nonce="{{ request.csp_nonce }}">
        body{font-family:"BIZ UDPMincho",serif;font-weight:400;display:flex;margin:0;background-color:#f0f0f0;box-sizing:border-box;line-height:1;touch-action:manipulation}h1{font-family:"BIZ UDPGothic",Arial,sans-serif;cursor:pointer;font-size: 1.4em;height:22.4px;}.tooltip-text{display:none}#hamburger-menu{position:absolute;right:3px;top:86px;width:25px;height:25px;cursor:pointer}.menu-icon{display:inline-block;cursor:pointer;width:100%;height:100%;position:relative;z-index:2}.menu-icon span{display:block;height:3px;width:100%;background:#333;margin:5px 0;transition:all 0.3s ease}#prev-move-btn,#next-move-btn{padding:8px 13px;font-size:15px;color:#fff;border:none;border-radius:5px;cursor:pointer}#prev-move-btn{background-color:#a34d4d;display:inline-block}#next-move-btn{background-color:#55b149;display:none}.current_circle{width:16px;height:16px;transform:translate(0,1px);border-radius:50%;background-color:#000;display:inline-block;margin-left:3px}.next_circle{width:12px;height:12px;transform:translate(0,1px);border-radius:50%;background-color:#fff;display:inline-block;border:.2px solid black}#score_black{width:100px;text-align:right;font-weight:bold}#score_white{width:100px;text-align:left;font-weight:lighter;font-size:14px}#score_display{display:inline-block;padding:6px 23px;background-color:#f0f0f0;border-left:1px solid black;border-right:1px solid black;white-space:nowrap}.marker{width:10%;height:10%;border-radius:50%;background-color:#000;position:relative;top:52.3%;left:51.9%;z-index:10}#game-container{text-align:center;width:min(calc(90vh - 90px),90vw);height:auto;max-width:600px;box-sizing:border-box;position:relative;left:50%;transform:translateX(-50%);padding-bottom:60px}#settings{margin-top:18px;margin-bottom:40px;background-color:#fff;border:#ccc solid 1.3px;border-radius:5px;padding:0 15px}.container{text-align:left;margin:10px 10px 10px 10px}#board{display:grid;grid-template-columns:repeat(8,1fr);gap:2px;background-color:green;padding:2%;margin:0;border-radius:5px 5px 0 0;width:96%;aspect-ratio:1 / 1}.row{display:contents}.cell{width:100%;aspect-ratio:1 / 1;background-color:#00a000;border-radius:8%;display:flex;justify-content:center;align-items:center;cursor:pointer;position:relative;  -webkit-tap-highlight-color:transparent}.valid-move{background-color:#00c000}.opponent-turn .valid-move{background-color:#00c000c0}.valid-move:hover{background-color:#00e000}.opponent-turn .valid-move:hover{background-color:#00c000c0}.opponent-turn .cell{cursor:default}.disc{width:80%;height:80%;border-radius:50%;position:absolute;box-shadow:0 4px 8px rgba(0,0,0,.3),inset 0 -2px 4px rgba(0,0,0,.2)}.last-move{box-shadow:0 0 10px 2px rgba(255,242,0,.7);border:2px solid rgb(255,64,0)}.faint-disc{opacity:.5;width:10%;height:10%;border-radius:50%;position:absolute}.black{background:radial-gradient(circle at 30% 30%,#333,#000)}.white{background:radial-gradient(circle at 30% 30%,#fff,#ccc)}.faint-black{background-color:#000}.faint-white{background-color:#fff;opacity:.7}#status{margin-top:0px;font-size:18px;background-color:#000;border-radius:0 0 5px 5px;font-weight:700;color:#000;border:.5px solid #000}#kihu{text-align:center}#move-history{margin-top:20px;text-align:left;max-height:200px;overflow-y:auto;background-color:#fff;padding:10px;border-radius:5px;border:1px solid #ccc;box-sizing:border-box;position:relative;padding:0 20px}#move-list{height:45px}.buttons_container{display:flex;align-items:center;justify-content:center;gap:13px;margin-top:19px}#copy-url-btn,#r-share-btn{position:relative;padding:10px 20px;margin-right:5px;width:40px;height:40px;background-color:#bedeff;background-image:url("{% static 'game/images/share.svg' %}");background-size:95%;background-position:center;background-repeat:no-repeat;color:#fff;border:none;border-radius:5px;display:inline-block;cursor:copy}#restart-btn{padding:8px 16px;font-size:15px;background-color:#007508;color:#fff;border:none;border-radius:5px;cursor:pointer;display:inline-block;transition:background-color .2s ease-in-out;height:40px}#restart-btn:hover{background-color:#2e7d32}#board-container{min-width:96%;position:relative}#mode-selection-banner{position:relative;top:10px;left:50%;transform:translateX(-50%);background:rgba(25,25,25,.7);padding:7px;margin-bottom:30px;border-radius:5px;display:flex;justify-content:center;align-items:center;z-index:1000;width:auto}.mode-btn{background:rgb(250,250,250);color:#000;padding:9px 15px;font-size:16px;cursor:pointer;transition:all .1s ease;flex:1;border:#000 solid 1.3px;width:96%;text-align:center}.mode-btn:not(.active):hover{transform:translate(0px,-2px)}.mode-btn.active{background:#007508;color:#fff;font-weight:700;box-shadow:0 0 10px rgba(0,117,8,.5)}#ai-level-display{position:relative;top:-8px;display:inline-flex;align-items:center;cursor:pointer;background:linear-gradient(to bottom,transparent 0%,transparent 70%,#cfcfcf);border:1px solid #828282;color:#000;padding:9px 15px;border-radius:5px;transition:all .2s ease;margin:0;font-size:.7em;font-weight:400;width:108px;justify-content:center;white-space:nowrap}#ai-level-display:after{content:" ▼";font-size:.5em;margin-left:6px;transition:transform .3s ease}#premium2unicode{display:none;font-size:12px}#result-popup,#r-background-overlay,#ai-level-popup,#buy-btn,.install-guide,#premiumPrompt,#signupPrompt,#menu-toggle,.menu{display:none}#r-overlay{background-image:url("{% static 'game/images/laurel.webp' %}")}.loader{border:4px solid #eee;border-top:4px solid #111;border-right:4px solid #111;border-radius:50%;width:30px;height: 30px;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);animation:spin .8s linear infinite}#evaluation_score{font-size:16px}@keyframes spin{0%{transform:translate(-50%,-50%) rotate(0deg)}100%{transform:translate(-50%,-50%) rotate(360deg)}}
    </style>
    {% if mode == 'online' %}
    <style nonce="{{ request.csp_nonce }}">
        h1{position:absolute;width:1px;height: 1px;padding:0;margin: -1px;overflow: hidden;clip:rect(0, 0, 0, 0);border:0;}#player-info{margin-bottom:20px}#player-list{padding-inline-start:0;position:relative;top:7px;height:1em}#role-dialog,#prev-move-btn{display:none}#surrender-btn{padding:10px 20px;height:40px;font-size:16px;background-color:#d32f2f;color:#fff;border:none;border-radius:5px;cursor:pointer;display:inline-block;transition:background-color .2s ease-in-out}#surrender-btn:hover{background-color:#b71c1c}#surrender-btn[disabled],#restart-btn[disabled],#prev-move-btn[disabled]{background-color:#d7d7d7;color:#666;cursor:not-allowed;opacity:.6;}#online-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);display:none;justify-content:center;align-items:center;z-index:10}#online-display{background:#fff;padding-bottom:19px;padding-left:10px;padding-right:10px;border-radius:8px;text-align:center;box-shadow:0 4px 10px rgba(0,0,0,.3);width:80%;max-width:260px;position:relative}#start-match{padding:10px 20px;font-size:16px;background-color:#008d09;background-image:linear-gradient(90deg, #00980a, #006e07);color:#fff;border:none;border-radius:5px;cursor:pointer;display:flex;justify-content:center;width:auto;height:40px;white-space:nowrap;border-bottom:solid 2px rgb(0,68,5)}#start-match:hover{transform:scale(1.02);#00aa0b}#web-match{padding:10px 20px;font-size:16px;background-color:#008d09;background-image:linear-gradient(90deg,rgb(0,112,213),rgb(0,205,149));color:#fff;border:none;border-bottom:solid 2px rgb(0,68,5);border-radius:5px;cursor:pointer;width:224px;height:40px;white-space:nowrap;margin:5px 0 17px 0}#web-match:hover{transform:scale(1.02);#00aa0b}#web-match:active{-webkit-transform:translateY(2px);transform: translateY(2px)}.qr-popup{display:none;position:absolute;z-index:1000;left:50%;top:50%;transform:translate(-50%,-50%);width:85%;aspect-ratio:1/1;max-width:285px;background:#fff;padding-bottom:15px;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,.5);align-items:center;justify-content:center}.qr-popup-content{position:relative}#qr{margin-left:6px;width:40px;height:40px;background:transparent;border:none;cursor:pointer;transition:background .2s;display:flex}#qr:hover{transform: scale(1.05)}#qr-icon{width:100%;height:100%}.invite-container{display:flex;align-items:center;justify-content:center}#qrcode{display:flex;justify-content:center;align-items:center;width:100%;aspect-ratio:1/1;margin:0 auto}#info-button{width:18px;height:18px;cursor:pointer;margin-left:8px}#evaluation_score{display:none;font-size:16px}#toOnlineSetting{position:absolute;top:16px;right:15px;width:24px;height:24p;cursor:pointer}#friend-title{margin-bottom:9px}
    </style>
    {% endif %}
    {% if mode == 'player' %}
    <style nonce="{{ request.csp_nonce }}">
        #evaluation_score{display:none;font-size:16px}
    </style>
    {% endif %}
    {% if request.user.subscription_type == "none" or not request.user.subscription_type %}
    <style nonce="{{ request.csp_nonce }}">
        #under-ad{margin-top:12px;height:310px}.adLoading{background-color:#ccc;padding-top:13px}
    </style>
    {% endif %}
    {% if request.LANGUAGE_CODE == "en" %}
        <style nonce="{{ request.csp_nonce }}">
            #ai-level-display{top:-1px;font-size:.5em;width:130px}#ai-level-display:after{content:" ▼";font-size:.4em;margin-left:6px;transition:transform .3s ease}
        </style>
    {% endif %}
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="anonymous">
    {% if DEBUG %}
        <link rel="stylesheet" href="{% static 'game/style.css' %}?v={{ TIMESTAMP }}" media="print" id="dynamic-css">
    {% else %}
        <link rel="stylesheet" href="{% static 'game/style.min.css' %}?v={{ TIMESTAMP }}" media="print" id="dynamic-css">
    {% endif %}
    <link href="https://fonts.googleapis.com/css2?family=BIZ+UDPGothic&family=BIZ+UDPMincho:wght@400&display=swap" rel="stylesheet" media="print" id="dynamic-fonts" crossorigin="anonymous">
    <script nonce="{{ request.csp_nonce }}">
        const PLACE_STONE_SOUND="{% static 'game/sounds/place-stone.mp3' %}";
        const csrf_token="{{ csrf_token }}";
        const DEBUG_MODE = {{ DEBUG|yesno:"true,false" }};
        const aiPath = DEBUG_MODE ? "{% static 'game/ai.js' %}" : "{% static 'game/ai.min.js' %}";
        const workerPath = DEBUG_MODE ? "{% static 'game/worker.js' %}" : "{% static 'game/worker.min.js' %}";
        const evaluatorPath = DEBUG_MODE ? "{% static 'game/evaluate.js' %}" : "{% static 'game/evaluate.min.js' %}";
        const isAuthenticated = {{ request.user.is_authenticated|yesno:"true,false" }};
    </script>
    {% if DEBUG %}
        <script defer src="{% static 'game/script.js' %}?v={{ TIMESTAMP }}"></script>
        {% if mode == 'online' %}
        <script defer src="{% static 'game/online.js' %}?v={{ TIMESTAMP }}"></script>
        {% endif %}
        {% if mode == 'ai' %}
            <link rel="modulepreload" href="{% static 'game/ai.js' %}" as="script" crossorigin>
        {% endif %}
    {% else %}
        <script defer src="{% static 'game/script.min.js' %}?v={{ TIMESTAMP }}"></script>
        {% if mode == 'online' %}
        <script defer src="{% static 'game/online.min.js' %}?v={{ TIMESTAMP }}"></script>
        {% endif %}
        {% if mode == 'ai' %}
            <link rel="modulepreload" href="{% static 'game/ai.min.js' %}" as="script" crossorigin>
        {% endif %}
    {% endif %}
    <!-- 翻訳後の文字列をmain.jsへ受け渡し-->
    {% with online_description=_("世界中のプレイヤーとオンライン対戦！2人で遊べるフレンド対戦モードや、一人でも楽しめる強力なオセロAIも完備しています。スマホ・PC両対応。ブラウザで手軽に遊ぶ！") ai_description=_("強力なオセロAIとWeb上で対戦。初心者から上級者まで一人で楽しめる、スマホ・PC両対応のサイトです。オンライン対戦も楽しめます。遊びやすいスマートなグラフィックが特徴。ブラウザで手軽にプレイ！") player_description=_("オセロのAI対戦・オンライン対戦・友達対戦などが遊べる無料Webサイト。一人で楽しめるオセロAIは最弱から最強まで幅広く完備。2人で一緒に楽しめるフレンド対戦も。世界中のプレイヤーと戦えるオンライン対戦や、スマホ一台で楽しめる「電子オセロ盤」も搭載 ✅️ ブラウザで手軽にプレイ") else_description=_("オセロのAI対戦・オンライン対戦・友達対戦などが遊べる無料Webサイト。一人で楽しめるオセロAIは最弱から最強まで幅広く完備。2人で一緒に楽しめるフレンド対戦も。世界中のプレイヤーと戦えるオンライン対戦や、スマホ一台で楽しめる「電子オセロ盤」も搭載 ✅️ ブラウザで手軽にプレイ") %}
    <meta name="description" content="{% if mode == 'online' %}{{online_description}}{% elif mode == 'ai' %}{{ai_description}}{% elif mode == 'player' %}{{player_description}}{% else %}{{else_description}}{% endif %}">
    <script nonce="{{ request.csp_nonce }}">
        const lang = {
            "online_description":"{{online_description|escapejs}}",
            "ai_description": "{{ai_description|escapejs}}",
            "player_description" : "{{player_description|escapejs}}",
            "else_description" :"{{else_description|escapejs}}",
            "congrats_aiLevel_unlocked_b":"{% trans '🎉 条件達成により、' %}",
            "congrats_aiLevel_unlocked_a":"{% trans 'が解放されました！' %}",
            "signupToUnlockLegend": "{% trans '🎉 「伝説」の解放条件①を満たしました！アカウントを作成して伝説にアクセス'|escapejs %}",
            "estimatedTime": "{% trans '推定待ち時間：'|escapejs %}",
            "seconds": "{% trans '秒'|escapejs %}",
            "legend": "{% trans '伝説'|escapejs %}",
            "matchmaking": "{% trans '対戦相手を探しています...'|escapejs %}",
            "black": "{% trans '黒'|escapejs %}",
            "white": "{% trans '白'|escapejs %}",
            "opponent":"{% trans '対戦相手'|escapejs %}",
            "spec": "{% trans '観客'|escapejs %}",
            "roleDialogB": "{% trans 'あなたは先手（黒）です' %}",
            "roleDialogW": "{% trans 'あなたは後手（白）です' %}",
            "notify_b": "{% trans '黒には次に打てる場所がないので、もう一度白の番になります。'|escapejs %}",
            "notify_w": "{% trans '白には次に打てる場所がないので、もう一度黒の番になります。'|escapejs %}",
            "not_your_turn": "{% trans 'あなたの手番ではありません。手番：'|escapejs %}",
            "you": "{% trans 'あなた'|escapejs %}",
            "timeout_winner": "{% trans '【時間切れ】👑 勝者：'|escapejs %}",
            "surrender_winner": "{% trans '【投了】👑 勝者：'|escapejs %}",
            "draw": "{% trans '引き分け！'|escapejs %}",
            "winner": "{% trans '👑 勝者：'|escapejs %}",
            "you_pass": "{% trans 'あなたには次に打てる場所がなかったのでもう一度、相手の番になります'|escapejs %}",
            "opponent_pass": "{% trans '相手には次に打てる場所がなかったのでもう一度、あなたの番になります'|escapejs %}",
            "nextLevel":"{% trans '次のレベルへ'|escapejs %}",
            "warn_EnOnly": "{% trans '⚠️ 無料版では英数字のみ入力可能です'|escapejs %}",
            "warn_charLimit": "{% trans '⚠️ 文字数：1〜10文字'|escapejs %}",
            "connecting": "{% trans 'ネットワーク接続がありません。'|escapejs %}",
            "spec_cant_play": "{% trans '観戦中です。あなたは手を打つことができません。'|escapejs %}",
            "copy_url": "{% trans '🔗 現在の石の配置を共有するURLをコピーしました！'|escapejs %}",
            "copy_spec": "{% trans '👀 現在のゲームを観戦するためのURLをコピーしました！'|escapejs %}",
            "copy_invite": "{% trans '🎮 現在のゲームへの招待URLをコピーしました！対戦相手にURLを送って対戦を始めましょう！'|escapejs %}",
            "copy_failed": "{% trans 'URLのコピーに失敗しました。'|escapejs %}",
            "copy_result": "{% trans '✅️ 対戦結果をコピーしました！'|escapejs %}",
            "even":"{% trans '| ⚖️ 互角'|escapejs %}",
            "evaluation": "{% trans '| ⚖️：黒'|escapejs %}",
            "thanks_install": "{% trans '🎮️ インストールありがとうございます！（開発者より）'|escapejs %}",
            "surrender_right": "{% trans '本当に投了しますか？'|escapejs %}",
            "thinking": "{% trans '考え中'|escapejs %}",
            "how2play_with_friend":"{% trans '🎮️ フレンド対戦の遊び方\n\n 1. 招待ボタンまたはQRコードボタンを押す\n\n 2. 表示される案内に従い、相手を対戦へ招待\n\n 3. 相手が招待に応じたら自動で対戦がスタート！' %}",
        };
    </script>
    {% endwith %}
    {% with online_title=_("オンライン対戦 - 無料オセロのリバーシWeb") ai_title=_("AI対戦 - 無料オセロのリバーシWeb") player_title=_("オセロ（リバーシ） - 無料Webゲーム") else_title=_("オセロ（リバーシ） - 無料Webゲーム") %}
    <title>
        {% if mode == 'online' %}
        {{online_title}}
        {% elif mode == 'ai' %}
        {{ai_title}}
        {% elif mode == 'player' %}
        {{player_title}}
        {% else %}
        {{else_title}}
        {% endif %}
    </title>
    <script nonce="{{ request.csp_nonce }}">
        const online_title = "{{online_title|escapejs}}";
        const ai_title = "{{ai_title|escapejs}}";
        const player_title = "{{player_title|escapejs}}";
        const else_title = "{{else_title|escapejs}}";
        const cspNonce = "{{ request.csp_nonce }}";
    </script>
    <meta property="og:type" content="website">
    <meta property="og:title" content="{% if mode == 'online' %}{{online_title}}{% elif mode == 'ai' %}{{ai_title}}{% elif mode == 'player' %}{{player_title}}{% else %}{{else_title}}{% endif %}">
    <meta property="og:description" content="{% trans 'オンラインで楽しめる無料オセロゲーム！' %}">
    <meta property="og:url" content="https://reversi.yuki-lab.com">
    <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{% static 'game/images/share-image.png' %}">
    <meta property="og:site_name" content="{% trans 'リバーシWeb' %}">
    <meta name="twitter:title" content="{% if mode == 'online' %}{{online_title}}{% elif mode == 'ai' %}{{ai_title}}{% elif mode == 'player' %}{{player_title}}{% else %}{{else_title}}{% endif %}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="{% trans 'ダウンロード不要！友達対戦やAIとの対戦が可能なブラウザゲームです' %}">
    <meta name="twitter:image" content="{{ request.scheme }}://{{ request.get_host }}{% static 'game/images/share-image.png' %}">
    {% endwith %}
    {% if mode == "online" %}
    <script async src="https://cdn.jsdelivr.net/npm/profanity-cleaner@latest"></script>
    <script async src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    {% endif %}
    <script async src="{% static 'game/confetti.browser.min.js' %}"></script>
    {% if request.LANGUAGE_CODE == "ja" %}
    <meta property="og:locale" content="ja_JP">
    {% else %}
    <meta property="og:locale" content="en_US">
    {% endif %}
    <meta name="author" content="リバーシWeb | 無料オセロゲーム">
    {% if request.LANGUAGE_CODE == "en" %}
    <script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "@additionalType": ["https://schema.org/VideoGame", "https://schema.org/WebApplication"],
    "name": "Reversi Web - Free Game",
    "review": {
      "@type": "Review",
      "author": {
        "@type": "Person",
        "name": "marie"
      },
      "datePublished": "2025-04-06",
      "reviewBody": "The game has all the features I wanted, and it was easy to play.",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": 5,
        "bestRating": 5,
        "worstRating": 1
      }
    },
    "applicationCategory": "GameApplication",
    "alternateName": "Smart Othello | Free Web Game",
    "description": "A free Othello game you can play right in your browser. Features AI vs. mode, online mode to battle with friends, and a convenient electronic Othello board. Quick to start on any device!",
    "image": "https://reversi.yuki-lab.com/static/game/images/share-image.png",
    "url": "https://reversi.yuki-lab.com/en/",
    "operatingSystem": "Web",
    "genre": "Board game",
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "hasPart": [
      {
        "@type": "WebPage",
        "name": "Othello Board",
        "url": "https://reversi.yuki-lab.com/en/"
      },
      {
        "@type": "WebPage",
        "name": "Play against an Othello AI",
        "url": "https://reversi.yuki-lab.com/en/ai/"
      },
      {
        "@type": "WebPage",
        "name": "Online Mode",
        "url": "https://reversi.yuki-lab.com/en/online/"
      }
    ]
    }
    </script>
    {% if mode == 'player' %}
    <script type="application/ld+json">
        {
          "@context" : "https://schema.org",
          "@type" : "WebSite",
          "name" : "Reversi Web - Free Othello Game",
          "alternateName" : "Smart Othello",
          "image": "https://reversi.yuki-lab.com/static/game/images/share-image.png",
          "url" : "https://reversi.yuki-lab.com/"
        }
    </script>
    {% endif %}
    {% else %}<script type="application/ld+json">
    {
            "@context": "https://schema.org",
            "@type": "SoftwareApplication",
            "@additionalType": ["https://schema.org/VideoGame", "https://schema.org/WebApplication"],
            "name": "オセロ - 無料で遊べるWebゲーム",
            "image": "https://reversi.yuki-lab.com/static/game/images/share-image.png",
            "review": {
              "@type": "Review",
              "author": {
                "@type": "Person",
                "name": "marie"
              },
              "datePublished": "2025-04-06",
              "reviewBody": "ほしい機能が過不足なく付いていてプレイしやすかったです。",
              "reviewRating": {
                "@type": "Rating",
                "ratingValue": 5,
                "bestRating": 5,
                "worstRating": 1
              }
            },
            "applicationCategory": "GameApplication",
            "alternateName": "無料オセロゲームのスマートオセロ",
            "description": "無料で遊べるオセロゲーム。一人で遊べるAI対戦モードや、友達とのオンライン対戦モードなどがあります。ブラウザで今すぐプレイ！",
            "url": "https://reversi.yuki-lab.com/",
            "operatingSystem": "Web",
            "genre": "Board game",
            "offers": {
              "@type": "Offer",
              "price": "0",
              "priceCurrency": "JPY"
            },
            "hasPart": [
              {
                "@type": "WebPage",
                "name": "オセロ盤",
                "url": "https://reversi.yuki-lab.com/"
              },
              {
                "@type": "WebPage",
                "name": "オセロAIと対戦",
                "url": "https://reversi.yuki-lab.com/ai/"
              },
              {
                "@type": "WebPage",
                "name": "オンライン対戦",
                "url": "https://reversi.yuki-lab.com/online/"
              }]
    }
    </script>
     {% if mode == 'player' %}
    <script type="application/ld+json">
        {
          "@context" : "https://schema.org",
          "@type" : "WebSite",
          "name" : "リバーシWeb - 無料オセロゲーム",
          "alternateName" : "スマートオセロ",
          "image": "https://reversi.yuki-lab.com/static/game/images/share-image.png",
          "url" : "https://reversi.yuki-lab.com/"
        }
      </script>
    {% endif %}
    {% endif %}
    <link rel="apple-touch-icon" sizes="180x180" href="{{ request.scheme }}://{{ request.get_host }}{% static 'game/images/icons/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ request.scheme }}://{{ request.get_host }}{% static 'game/images/favicon/favicon-16x16.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ request.scheme }}://{{ request.get_host }}{% static 'game/images/favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="48x48" href="{{ request.scheme }}://{{ request.get_host }}{% static 'game/images/favicon/favicon-48x48.png' %}">
    <link rel="shortcut icon" href="{{ request.scheme }}://{{ request.get_host }}{% static 'game/images/favicon/favicon.ico' %}">
    <link rel="manifest" href="{% url 'manifest' %}">
    {% if request.LANGUAGE_CODE == "ja" %}
    <link rel="canonical" href="{% if mode == 'online' %}https://reversi.yuki-lab.com/online/{% elif mode == 'ai' %}https://reversi.yuki-lab.com/ai/{% elif mode == 'player' %}https://reversi.yuki-lab.com/{% else %}https://reversi.yuki-lab.com/{% endif %}">
    {% else %}
    <link rel="canonical" href="{% if mode == 'online' %}https://reversi.yuki-lab.com/en/online/{% elif mode == 'ai' %}https://reversi.yuki-lab.com/en/ai/{% elif mode == 'player' %}https://reversi.yuki-lab.com/en/{% else %}https://reversi.yuki-lab.com/en/{% endif %}">
    {% endif %}
    <link rel="alternate" hreflang="ja" href="{% if mode == 'online' %}https://reversi.yuki-lab.com/online/{% elif mode == 'ai' %}https://reversi.yuki-lab.com/ai/{% elif mode == 'player' %}https://reversi.yuki-lab.com/{% else %}https://reversi.yuki-lab.com/{% endif %}" />
    <link rel="alternate" hreflang="en" href="{% if mode == 'online' %}https://reversi.yuki-lab.com/en/online/{% elif mode == 'ai' %}https://reversi.yuki-lab.com/en/ai/{% elif mode == 'player' %}https://reversi.yuki-lab.com/en/{% else %}https://reversi.yuki-lab.com/en/{% endif %}" />
    <link rel="alternate" hreflang="x-default" href="{% if mode == 'online' %}https://reversi.yuki-lab.com/online/{% elif mode == 'ai' %}https://reversi.yuki-lab.com/ai/{% elif mode == 'player' %}https://reversi.yuki-lab.com/{% else %}https://reversi.yuki-lab.com/{% endif %}" />
</head>
<body>
<div id="game-container">
        <!-- モード選択バナー -->
        <div id="mode-selection-banner">
            <button class="mode-btn" data-mode="player">{% trans "オセロ盤" %}</button>
            <button class="mode-btn" data-mode="ai">{% trans "AI対戦" %}</button>
            <button class="mode-btn" data-mode="online">{% trans "対人戦" %}</button>
        </div>
        {% with online_h1=_("オンライン対戦") player_h1=_("オセロ盤") else_h1=_("リバーシWeb") %}
        <h1 id="title">
            {% if mode == 'online' %}
                {{online_h1}}
            {% elif mode == 'ai' %}
                <span id="ai-level-display">Loading...</span>
            {% elif mode == 'player' and request.LANGUAGE_CODE == 'en' %}
                Reversi Board
            {% elif mode == 'player' and not request.LANGUAGE_CODE == 'en' %}
                {{player_h1}}
            {% else %}
                {{else_h1}}
            {% endif %}
        </h1>
        <script nonce="{{ request.csp_nonce }}">
            const online_h1 = "{{online_h1|escapejs}}";
            const player_h1 = "{{player_h1|escapejs}}";
            const else_h1 = "{{else_h1|escapejs}}";
        </script>
        {% endwith %}
         <!-- AIレベル選択ポップアップ -->
        <div id="ai-level-popup">
             <div id="ai-level-selector">
                 <h3>{% trans "AIレベルを選択" %}</h3>
                 <div id="ai-level-list">
                     <div data-level="0" class="ai-level-item">{% trans "初級AI" %}</div>
                     <div data-level="1" class="ai-level-item">{% trans "中級AI" %}</div>
                     <div data-level="2" class="ai-level-item">{% trans "上級AI" %}</div>
                     <div data-level="3" class="ai-level-item locked-level" data-unlock-level="2">{% trans "達人級AI" %}</div>
                     <div data-level="5" class="ai-level-item locked-level" data-unlock-level="3">{% trans "名人級AI" %}</div>
                     <div data-level="7" class="ai-level-item locked-level" data-unlock-level="5">{% trans "🔆 偉人級AI" %}</div>
                     <div data-level="9" class="ai-level-item locked-level" data-unlock-level="7">{% trans "👺 超越級AI" %}</div>
                     <div data-level="6" class="ai-level-item" id="weakest">{% trans "🐤 最弱AI" %}</div>
                 </div>
             </div>
        </div>
        <div id="hamburger-menu">
            <input type="checkbox" id="menu-toggle">
            <label for="menu-toggle" class="menu-icon">
              <span></span>
              <span></span>
              <span></span>
            </label>
            <div class="menu" id="TMenu">
                <div class="premium">
                    <a id="open-portal">{% trans "課金情報を管理する" %}</a>
                </div>
                <div class="free">
                    <a id="buy-premium-btn">{% trans "新機能を解放" %}</a>
                </div>
                <a id="toSetting">{% trans "設定" %}</a>
                <div class="authenticated">
                    <a href="{% url 'user_logout' %}">{% trans "ログアウト" %}</a>
                    <a href="{% url 'password_change' %}">{% trans "パスワード変更" %}</a>
                </div>
                <div class="guest">
                    <a href="{% url 'user_signup' %}">{% trans "アカウント登録" %}</a>
                    <a href="{% url 'user_login' %}">{% trans "ログイン" %}</a>
                </div>
            </div>
        </div>
        <div id="player-info"><ul id="player-list"></ul></div>
        <span id="timer-display"></span>
        <div id="board-container">
            <div id="board" role="grid" ></div>
            <div class="loader" id="b_loader"></div>
            {% if mode == 'online' %}
            <div id="online-overlay">
                <div id="online-display">
                    <img src="{% static "game/images/setting.svg" %}" alt="{% trans '設定' %}" id="toOnlineSetting">
                    <h3>{% trans "オンライン対戦" %}</h3>
                    <div id="player-name-container">
                        <label for="player-name" id="label4name">{% trans "表示名：" %}</label>
                        <input type="text" id="player-name" maxlength="10">
                        <div id="warning"></div>
                        <div id="premium2unicode">
                        {% blocktrans %}👑 <a id="name-premium" href="#">プレミアム版</a>で英数字以外を利用！{% endblocktrans %}
                        </div>
                    </div>
                    <button id="web-match" class="btn-primary">{% trans "🌐 世界中と対戦" %}</button>
                    <div id="friend-title">{% trans "フレンド対戦" %}</div>
                    <div class="invite-container">
                    <button id="start-match" class="btn-primary">{% trans "対戦相手を招待" %}</button>
                    <button id="qr">
                        <img src="{% static 'game/images/qr.svg' %}" alt="{% trans 'オセロ対戦への招待用QRコード' %}" id="qr-icon">
                    </button>
                    <img src="{% static 'game/images/info.svg' %}" alt="{% trans 'オセロのオンライン対戦機能の遊び方' %}" id="info-button">
                    </div>
                </div>
            </div>
            <!-- QRコード用のポップアップ -->
            <div id="qr-popup" class="qr-popup">
                <div class="qr-popup-content">
                    <h3>{% trans "招待用QRコード" %}</h3>
                    <div id="qrcode"></div>
                </div>
            </div>
            {% endif %}
        </div>
        <div id="status">
            <div id="score_display">
                <span id="n-disc" class="tooltip">
                    {% if not request.user.is_authenticated %}
                    <span class="tooltip-text" id="number-tip">{% trans "盤面にある石の数" %}</span>
                    {% endif %}
                    <span id="s_current_circle" class="current_circle"></span>
                    <span id="score_black">2</span>：<span id="score_white">2</span>
                    <span id="s_next_circle" class="next_circle"></span>
                </span>
                <span class="tooltip">{% if not request.user.is_authenticated %}<span class="tooltip-text" id="eval-tip">{% trans "盤面の情勢評価（数字が大きいほど黒が有利）" %}</span>{% endif %}<span id="evaluation_score">{% trans "| ⚖️ 互角" %}</span></span>
            </div>
        </div>
    {% if request.user.subscription_type == "none" or not request.user.subscription_type %}
        <div id="under-ad" class="adLoading">Loading...</div>
    {% endif %}
    <div class="buttons_container">
        <button id="copy-url-btn" aria-label="{% trans 'オセロ盤の盤面を共有するURLをコピー' %}"></button>
        {% if mode == "online" %}
        <button id="prev-move-btn" disabled>＜</button>
        <button id="next-move-btn">＞</button>
        <button id="surrender-btn" aria-label="{% trans "投了" %}" disabled>{% trans "投了" %}</button>
        <button id="restart-btn" aria-label="{% trans "新しい対局を開始" %}" disabled>{% trans "🚩 新規対局" %}</button>
        {% else %}
        <button id="prev-move-btn" class="tooltip">{% if not request.user.is_authenticated %}<span class="tooltip-text" id="prev-tip">{% trans "長押しで複数戻す" %}</span>{% endif %}＜</button>
        <button id="next-move-btn" class="tooltip">{% if not request.user.is_authenticated %}<span class="tooltip-text" id="next-tip">{% trans "長押しで複数進める" %}</span>{% endif %}＞</button>
        <button id="restart-btn" aria-label="{% trans "新しい対局を開始" %}">{% trans "🚩 新規対局" %}</button>
        {% endif %}
    </div>
        <div id="move-history">
            <h3 id="kihu">{% trans "棋譜" %}</h3>
            <pre id="move-list">{% trans "　棋譜はまだありません" %}</pre>
        </div>
        <div id="settings">
            <h3>{% trans "設定" %}</h3>
            <div class="container">
                {% if mode == "online" %}
                <div id="accept-bot">
                    <label for="accept-bot-checkbox">
                        <input type="checkbox" id="accept-bot-checkbox" checked>
                        {% trans "「🌐 世界中と対戦」でBotを許可" %}
                    </label>
                </div>
                <br>
                {% endif %}
                <label id="level_ai">
                    {% trans "🤖 AIの強さ：" %}
                    <select id="aiLevelSelect">
                        <option value="0">{% trans "初級" %}</option>
                        <option value="1">{% trans "中級" %}</option>
                        <option value="2">{% trans "上級" %}</option>
                        <option value="3" class="locked-level" data-unlock-level="2">{% trans "達人級" %}</option>
                        <option value="5" class="locked-level" data-unlock-level="3">{% trans "名人級" %}</option>
                        <option value="7" class="locked-level" data-unlock-level="5">{% trans "🔆 偉人級" %}</option>
                        <option value="9" class="locked-level" data-unlock-level="7">{% trans "👺 超越級" %}</option>
                        <option value="6">{% trans "🐤 最弱" %}</option>
                    </select>
                </label>
                <div id="validContainer">
                    <label>
                        <input type="checkbox" id="showValidMovesCheckbox" checked> {% trans "有効な手をハイライト" %}
                    </label>
                </div>
                <br>
                {% trans "🔈 サウンド：" %} <br>
                <div id="soundSettingContainer">
                    <label class="SE">
                        <input type="checkbox" id="bgmCheckbox"> {% trans "ゲームのBGM" %}
                    </label><br>
                    <label class="SE">
                        <input type="checkbox" id="gameEndSoundCheckbox" checked> {% trans "勝利 / 敗北" %}
                    </label><br>
                    <label class="SE">
                        <input type="checkbox" id="soundEffectsCheckbox" checked> {% trans "石を置く音" %}
                    </label><br>
                <div id="timeLimitBox_">
                    <label class="SE">
                        <input type="checkbox" id="timeLimitSoundCheckbox" checked> {% trans "残り時間あと少し" %}
                    </label><br>
                </div>
                <div id="playerJoinSoundBox">
                    <label class="SE">
                        <input type="checkbox" id="playerJoinSoundCheckbox" checked> {% trans "プレイヤー参加" %}
                    </label><br>
                </div>
                </div><br>
                {% trans "⚖️ 情勢の評価：" %}<br>
                <div id="showEvaluation">
                    <label class="evalSettings">
                        <input type="checkbox" id="evalPlayerMode"> {% trans "オセロ盤モードのとき表示" %}
                    </label><br>
                    <label class="evalSettings">
                        <input type="checkbox" id="evalAIMode" checked> {% trans "AI対戦モードのとき表示" %}
                    </label><br>
                </div>
                <br>
                <div id="timeLimitContainer">
                <label>
                    {% trans "⏰ 持ち時間：" %}
                    <select id="timeLimitSelect">
                        <option value="0">{% trans "制限なし" %}</option>
                        <option value="180">{% trans "1手あたり3分" %}</option>
                        <option value="120">{% trans "1手あたり2分" %}</option>
                        <option value="90">{% trans "1手あたり1分半" %}</option>
                        <option value="60">{% trans "1手あたり1分" %}</option>
                        <option value="30">{% trans "1手あたり30秒" %}</option>
                        <option value="10">{% trans "1手あたり10秒" %}</option>
                    </select>
                </label>
                </div>
                <br>
            </div>
        </div>
    <section class="notes">
        <h2>{% trans "当サイト「リバーシWeb」の機能" %}</h2>
        <p>{% blocktrans trimmed %}
            オセロを無料で遊べるWebサイトです。<a href="/ai/">AI対戦</a>、<a href="/online/">オンライン対戦</a>、<a href="/">電子オセロ盤</a>など、様々な機能に対応しています。
        {% endblocktrans %}
        </p>
        <h3>
            {% if mode == 'online' %}
              {% trans "現在選択されているモード：通信対戦" %}
            {% elif mode == 'ai' %}
              {% trans "現在選択されているモード：AI対戦" %}
            {% elif mode == 'player' %}
              {% trans "現在選択されているモード：電子オセロ盤" %}
            {% else %}
              {% trans "現在選択されているモード：なし" %}
            {% endif %}
        </h3>
        <p>
    {% if mode == 'online' %}
        {% trans "オンライン対戦モード（通信対戦モード）では、別々のデバイスからゲームに参加できます。遠く離れた場所にいる人ともWeb上でオセロを遊ぶことができます。招待URLを共有するか、QRコードをスキャンすることで、対局への参加や観戦が可能です。" %}
    {% elif mode == 'ai' %}
        {% trans "初級から上級まで、自分に合った強さのオセロAIとWeb上で対戦できます。" %}
    {% elif mode == 'player' %}
        {% trans "電子オセロ盤モードでは、デバイス1台でオセロを遊ぶことができます。現地で家族や友達とオセロを遊びたいけれど、現物のオセロ盤を持っていない時に便利です。" %}
    {% else %}
    {% endif %}
        </p>
        <h3>{% trans "機能のオン・オフ" %}</h3>
        <p>
            <p>
                {% blocktrans asvar settings_text %}一部の機能は、<a href="#settings">「設定」</a>からオン・オフを切り替えられます。次回以降に同じブラウザで遊ぶ場合もその設定を引き継げます。{% endblocktrans %}
                {{ settings_text|safe }}
            </p>
        </p>
        <div class="small">{% trans "※ ただし通信対戦モードが選択された場合は、通信対戦における設定に合わせて設定が変更されます。" %}</div>
        <h3>{% trans "アプリ版で遊ぶ" %}</h3>
        <p>{% trans "本サイトはブラウザゲームですが、Webアプリとしてホーム画面に追加することもできます。アプリ設置の所要時間は数秒で、デバイスの容量もほぼ消費しません。一方でゲームの起動はさらに高速になり、主な機能をオフラインでも利用できるメリットがあります。ぜひお試しください" %}</p>
        <button id="install-btn">{% trans "ホーム画面に追加" %}</button>
    </section>
    <section class ="notes" id="rules">
        <h2>{% trans "オセロのルール" %}</h2>
        <h3>{% trans "基本ルール" %}</h3>
        <p>{% trans "リバーシは 8×8 の盤面で行うボードゲームです。「オセロ」という名前でも親しまれています。本ゲームの対戦は、以下のルールで進行します。" %}</p>
        <ul>
            {% blocktrans trimmed %}
            <li>ゲーム開始時は中央に黒と白の石が 2 個ずつ配置されます。</li>
            <li>黒が先手、白が後手で交互に手を打ちます。</li>
            <li>相手の石を挟むと、自分の石に変わります。縦・横・斜めのどの方向でも挟むことができます</li>
            <li>自分の石は、相手の石を挟んで取れる場所（ <strong><a href="#LegalMove">合法手</a></strong> ）に置くことができます。</li>
            <li>自分の <strong><a href="#LegalMove">【合法手】</a></strong> がない場合は、自動的に相手の番へ <strong>【パス】</strong> されます。両者とも <strong>【パス】</strong> になった場合はゲーム終了です。</li>
            {% endblocktrans %}
        </ul>
        <h3 id="LegalMove" >{% trans "【合法手】について" %}</h3>
        <p>{% trans "本ゲームでは、プレイヤーが打てる <strong><a href='#LegalMove'>【合法手】</a></strong> を自動で判定し、視認しやすいようにハイライト表示する機能があります。この機能は設定からオフにできます" %}</p>
        <h3>{% trans "時間制限" %}</h3>
        {% blocktrans trimmed %}
        <p>ゲームのスピード感を高めるために <strong>制限時間</strong> を設定できます。最短では <strong>10秒ルール</strong> の超高速対局も可能です！</p>
        {% endblocktrans %}
        <h3>{% trans "勝利条件" %}</h3>
        <ul>
            {% blocktrans trimmed %}
            <li>ゲーム終了時に、自分の石の数が相手より多ければ勝利となります。同数の場合は引き分けです。</li>
            <li><strong>制限時間</strong> のある対局では、相手が時間切れになった場合も勝利となります</li>
            <li><a href="/online/">通信対戦</a> では、<strong>投了</strong> ボタンが使えます。相手が <strong>投了</strong> した場合、自分の勝利となります</li>
            {% endblocktrans %}
        </ul>
    </section>
    <section class ="notes" id="blog">
        <h2>{% trans "オセロで勝つための秘訣" %}</h2>
        <p>
            {% if request.LANGUAGE_CODE == 'en' %}
            <a href="/en/strategy-reversi-othello.html">This article</a>, written by the developer of this site, Reversi Web, offers free strategies for intermediate and advanced players of the reversi game.
            {% else %}
            本サイト・リバーシWebの開発者が執筆した<a href="/strategy-reversi-othello.html">こちらの記事</a> では、オセロゲームの中・上級者向け攻略法を無料で紹介しています
            {% endif %}
            </p>
    </section>
    <section class ="notes" id="other_games">
        <h2>{% trans "提供ゲーム一覧" %}</h2>
        <p>{% trans "オセロ以外にも、当サイト（Yuki-Lab）では様々なミニゲームを個人開発しています。" %}</p>
        <ul>
            <li><a href="https://shogi.yuki-lab.com/">{% trans "将棋" %}</a></li>
            <li><a href="https://jumping.yuki-lab.com/">{% trans "柴犬が主人公の2Dアクション" %}</a></li>
            <li><a href="https://puzzle.yuki-lab.com/">{% trans "シンプルなパズルゲーム" %}</a></li>
        </ul>
    </section>
    <!--フィードバック用フォームへのリンク-->
    <a href="https://docs.google.com/forms/d/e/1FAIpQLSeID_5fOJLDNPMJAz-kZbFmTLPxwdUUNVBsjXA36letgF7gow/viewform" id="feedback-link" target="_blank">
        {% trans "開発者へフィードバックを送る" %}
    </a>
    <div class="credit">
    <!--copyright-->
    &copy; 2024-{% now "Y" %} Yuki-Lab | {% trans "本ゲームでは、多くの人にとって読みやすいユニバーサルデザインフォントを使用しています" %}
    </div>
</div>
<br>
{% if mode == "online" %}
    <div id="role-dialog-overlay"></div>
    <div id="role-dialog">
    <p id="role-dialog-content">Loading...</p>
    <label><input type="checkbox" id="role-not-checkbox"><span id="span-role-not-show">{% trans "今後このダイアログを表示しない" %}</span></label><br><br>
    <button id="closeRoleDialog">OK</button>
    </div>
{% endif %}
<!-- iOS専用のインストールガイド -->
<div id="ios-install-guide" class="install-guide">
    <div class="install-guide-content">
        <h5>{% trans "このサイトを「ホーム画面に追加」すると、更に快適に遊べます!" %}</h5>
        <ul id="install-recommend">{% blocktrans trimmed %}
            <li>✅️ Webアプリだからアプリ容量はほぼ0！</li>
            <li>⏳️ 高速に起動して時短！</li>
            <li>✈️ オフラインで遊べる</li>
            {% endblocktrans %}
        </ul>
        <h5 id="how2install">{% trans "10秒で追加 👇" %}</h5>
    </div>
    <img src="{% static 'game/images/iOSinstall.webp' %}" alt="{% trans 'リバーシWebをiOSにインストールする方法：まず共有ボタンを押し、次に「ホーム画面に追加」を選択' %}" id="ios-install-guide-img" loading="lazy">
    <button id="close-install-guide">{% trans "❌️ 閉じる" %}</button>
</div>
{% if request.user.subscription_type == "none" or not request.user.subscription_type %}
{% if request.user.is_authenticated %}
<div id="premiumPrompt">
    <h5>{% trans "🎫 特別オファー：95円で最高のゲーム体験" %}</h5>
    <p id="offer-content">{% trans "今なら90%OFF！月額95円でプレミアム版を購入！" %}</p>
    <ul>
        <li>{% trans "✅️ 広告が完全に非表示" %}</li>
        <li>{% trans "❤️ ユーザー名に英数字以外（日本語や絵文字など）を使用" %}</li>
        <li>{% trans "🔄 別の端末や別ブラウザでもログインだけで購入を復元" %}</li>
        <li>{% trans "🤝 個人開発で運営している本ゲームを応援" %}</li>
    </ul>
    <button id="offer-button">{% trans "👑 アップグレード" %}</button><br>
    <button id="close-offer">{% trans "❌️ 閉じる" %}</button>
</div>
{% else %}
<div id="signupPrompt">
    <h5>{% trans "無料アカウント登録で新機能" %}</h5>
    <ul class="signup-merit">
        <li>✅️ {% trans "わずか10秒で簡単作成！" %}</li>
        <li>🚀 {% trans "高度なAIが解放されます" %}</li>
        <li>🛡️ {% trans "一部データの引き継ぎも可能に" %}</li>
    </ul>
    <a id="signup-button" href="{% url 'user_signup' %}">{% trans "無料で登録" %}</a>
    <button id="close-signup">{% trans "❌️ 閉じる" %}</button>
</div>
{% endif %}

{% endif %}
<div id="r-background-overlay"></div>
<!-- 対戦結果ポップアップ -->
<div id="result-popup">
    <div class="slideTab"></div>
    <div id="r-overlay"></div>
    <img id="result-image" src="" alt="{% trans "オセロの対局結果" %}"><div id="r-message"></div><p id="r-score-container"><span id="score-difference">⚫️ 34 : 30 ⚪️</span></p>
    <div id="result-container">
        <button id="r-share-btn" class="shine-button" aria-label="{% trans 'オセロ盤の盤面を共有するURLをコピー' %}"></button>
        <button id="tweet-result" class="shine-button">{% trans "𝕏 に投稿" %}</button>
        <button id="restart-match" class="shine-button">{% trans "もう一度プレイ！" %}</button>
    </div>
    <button id="close-result">{% trans "❌️ 閉じる" %}</button>
</div>
    <audio id="victorySound" src="{% static 'game/sounds/victory.mp3' %}" preload="none"></audio>
    <audio id="defeatSound" src="{% static 'game/sounds/defeat.mp3' %}" preload="none"></audio>
    <audio id="warningSound" src="{% static 'game/sounds/warning.mp3' %}" preload="auto"></audio>
    <audio id="playerJoin" src="{% static 'game/sounds/playerJoin.mp3' %}" preload="none"></audio>
    <audio id="bgm" src="{% static 'game/sounds/bgm.mp3' %}" preload="none">
    </audio>
</body>
<script nonce="{{ request.csp_nonce }}" >
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register("/sw.js?v=7", { scope: "/"})
        .then(registration => console.log("Service Worker registered:", registration))
        .catch(error => console.log("Service Worker registration failed:", error));
    }
</script>
</html>