{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=BIZ+UDGothic&family=BIZ+UDPMincho&display=swap" rel="stylesheet">


    <meta name="description" content="">
    <meta name="description" content="
    {% if mode == 'online' %}
        オセロのオンライン対戦ができる無料Webゲームサイト。離れた場所にいる相手とも、リアルタイムで通信対戦が可能です。ブラウザさえあれば、オセロ盤の用意やアプリのダウンロードが一切不要！スマホ・PC・iPadなど好きなデバイスから、オセロゲームの友達対戦を無料で遊べるWebサイトです。
    {% elif mode == 'ai' %}
        ブラウザ上でAIとオセロ対戦！一人で楽しめます。スマホ・PC・iPadなどデバイス一台でオセロが無料で遊べるWebサイト。オセロ盤の用意やアプリのインストールも必要ないので、気軽に楽しみたい人におすすめ！
    {% else %}
        スマホ・PC・iPadなどデバイス一台でリバーシ（オセロ）が遊べる無料Webゲームサイト。オセロ盤の用意やアプリのインストールも必要なし！オセロの友達対戦をブラウザで遊べるスマートオセロ盤です。スマホ一台があればどこでも遊べるので、旅行先でのレクリエーションにもオススメ
    {% endif %}
">

    <title>
        {% if mode == 'online' %}
            オンライン対戦 | リバーシWeb - 無料で遊べるオセロゲーム
        {% elif mode == 'ai' %}
            AI対戦 | リバーシWeb - 無料で遊べるオセロゲーム
        {% else %}
            スマートオセロ盤 | リバーシWeb - 無料で遊べるオセロゲーム
        {% endif %}
    </title>    
    <link rel="stylesheet" href="{% static 'game/style.css' %}">
    <script src="{% static 'game/script.js' %}" defer></script>
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "VideoGame",
          "name": "Web Othello - 無料で遊べるオセロゲーム",
          "description": "一人で遊べるAI対戦も友達とのオンライン対戦も可能な無料のオセロゲーム。ブラウザで今すぐプレイ！",
          "image": "https://reversi.yuki-lab.com/static/game/images/othello.png",
          "url": "https://reversi.yuki-lab.com",
          "operatingSystem": "Web",
          "genre": "Board game",
          "gamePlatform": "Web",
          "gameMode": ["SinglePlayer", "AI", "Multiplayer"],
          "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "JPY"
          },
          "hasPart": [
            {
              "@type": "WebPage",
              "name": "オセロボード",
              "url": "https://reversi.yuki-lab.com/play"
            },
            {
              "@type": "WebPage",
              "name": "AI対戦",
              "url": "https://reversi.yuki-lab.com/ai"
            },
            {
              "@type": "WebPage",
              "name": "オンライン対戦",
              "url": "https://reversi.yuki-lab.com/online"
            }
          ]
        }
        </script>

    <link rel="shortcut icon" type="image/vnd.microsoft.icon" href="{% static 'game/images/favicon/favicon.ico' %}">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'game/images/favicon/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'game/images/favicon/icon-16x16.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'game/images/favicon/icon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="48x48" href="{% static 'game/images/favicon/icon-48x48.png' %}">
    <link rel="icon" type="image/png" sizes="96x96" href="{% static 'game/images/favicon/icon-96x96.png' %}">
    <link rel="icon" type="image/png" sizes="192x192" href="{% static 'game/images/favicon/icon-192x192.png' %}">
    <link rel="manifest" href="{% static 'game/images/favicon/manifest.json' %}">
    
    <meta name="theme-color" content="#0078d7">

    <link rel="canonical" href="
    {% if mode == 'online' %}
        https://reversi.yuki-lab.com/online/
    {% elif mode == 'ai' %}
        https://reversi.yuki-lab.com/ai/
    {% else %}
        https://reversi.yuki-lab.com/
    {% endif %}
    ">
    
</head>
<body>
    <div id="game-container">
        <h1 id="title">
            {% if mode == 'online' %}
                オンライン対戦
            {% elif mode == 'ai' %}
                AI対戦
            {% else %}
                スマートオセロ盤
            {% endif %}
        </h1>
    
        <img src="{% static 'game/images/setting.svg' %}" alt="設定" id="setting">
        <div id="player-info">
            <ul id="player-list"></ul>
        </div>
        <span id="timer-display"></span>
    <div id="board-container">
        <div id="board" role="grid" >
        </div>
        
        {% if mode == 'online' %}
        <div id="game-settings-overlay">
            <div id="game-settings">
                <h3>対戦設定</h3>
                <label>⏱ 持ち時間:
                    <select id="time-limit">
                        <option value="0">制限なし</option>
                        <option value="10">10秒</option>
                        <option value="30">30秒</option>
                        <option value="60">1分</option>
                        <option value="180">3分</option>
                        <option value="300">5分</option>
                    </select>
                </label>
                <br>
                <label>
                    <input type="checkbox" id="highlight-moves" checked> 有効な手をハイライト表示
                </label>
                <br>
                <button id="start-match" class="btn-primary">対戦開始 & URLコピー！</button>
            </div>
        </div>
        {% endif %}
    </div>
        <div id="status">
            <span class="current-player" id="c_black">黒番</span>
            <div id="black_circle"></div>
            <span id="score_black"></span>：<span id="score_white"></span>
            <div id="white_circle"></div>

            <span class="current-player" id="c_white">白番</span>

        </div>

        <button id="copy-url-btn"></button>
        <div id="copy-tooltip" class="tooltip">コピーして観戦者や<br>対戦相手を招待！</div>
        <button id="surrender-btn">投了</button>
        <button id="restart-btn">🚩 新規</button>
        <div id="move-history">
            <h3>棋譜</h3>
            
            <button id="prev-move-btn">＜</button>
            <button id="next-move-btn">＞</button>
            
            <pre id="move-list">　棋譜はまだありません</pre>

        </div>
        <!-- モード選択バナー -->
        <div id="mode-selection-banner">
            <button class="mode-btn" data-mode="player">スマートオセロ盤</button>
            <button class="mode-btn" data-mode="ai">AI対戦</button>
            <button class="mode-btn" data-mode="online">オンライン対戦</button>
        </div>

        <div id="settings">
            <h3>設定</h3>
            <div class="container">
                🔈 効果音： <br>
                <div style="margin-left: 20px; margin-top:5px;">
                <label>
                    <input type="checkbox" id="gameEndSoundCheckbox" checked> 勝利 / 敗北
                </label> <br><br>
                <label>
                    <input type="checkbox" id="soundEffectsCheckbox" checked> 石を置く
                </label> <br><br>
                <div id="timeLimitBox_">
                    <label>
                        <input type="checkbox" id="timeLimitSoundCheckbox" checked> 残り時間あと少し
                    </label> <br><br>
                </div>
                <div id="playerJoinSoundBox">
                    <label>
                        <input type="checkbox" id="playerJoinSoundCheckbox" checked> プレイヤー参加
                    </label> <br><br>
                </div>
                

                </div>

               
                
                <div id="timeLimitContainer">
                <label>
                    ⏱ 一手あたりの持ち時間： 
                    <select id="timeLimitSelect">
                        <option value="0">制限なし</option>
                        <option value="300">5分</option>
                        <option value="180">3分</option>
                        <option value="60">1分</option>
                        <option value="30">30秒</option>
                        <option value="10">10秒</option>
                        
                    </select>
                </label>
                </div>
                <br>
                <label id="level_ai">
                    🤖 AIのレベル：
                    <select id="aiLevelSelect">
                        <option value="0">初級</option>
                        <option value="2">中級</option>
                        <option value="9">上級</option>
                    </select>
                </label>
                <div id="validContainer">
                    <label>
                        👍
                        <input type="checkbox" id="showValidMovesCheckbox" checked> 有効な手をハイライト
                    </label>
                </div>
                <br>
                
               
             
                  

                <div class="caution">
                    ※ 変更後の持ち時間は、次の一手から適用されます。 <br>
                    ※ 持ち時間がゼロになると<strong>直ちに負け</strong>となる設計のため、ご注意ください。そのままURLをリロードすると、持ち時間をリセットして再開できます。                    
                    
                </div>
            </div>
        </div>  
    <a href="https://pc.moppy.jp/entry/invite.php?invite=y22tA17c&type=service"><img decoding="async" loading="lazy" src="https://img.moppy.jp/pub/pc/friend/640x480-13.jpg" alt="アプリインストール・ゲームアプリで無料で簡単にポイントが貯まる！楽しくポイ活するならモッピー" id="ad"></a>

    <section id="rules">
        <h2>リバーシ（オセロ）のルール</h2>
    
        <h3>基本ルール</h3>
        <p>オセロは 8×8 の盤面で行うボードゲームです。以下のルールで進行します。</p>
        <ul>
            <li>ゲーム開始時は中央に黒と白の石が 2 個ずつ配置されます。</li>
            <li>黒が先手、白が後手で交互に手を打ちます。</li>
            <li>挟んだ相手の石は自分の色に変わります。</li>
            <li><strong>合法手</strong>：自分の石は、相手の石を直線（縦・横・斜め）で挟める場所にしか置けません。</li>
            <li>置ける手がない場合はパスし、両者とも置けない場合はゲーム終了です。</li>
        </ul>
    
        <h3>合法手について</h3>
        <p>本ゲームでは、プレイヤーが打てる「合法手」を自動で判定し、視認しやすいようにハイライト表示する機能があります。この機能は設定からオフにできます</p>
    
        <h3>時間制限</h3>
        <p>ゲームのスピード感を高めるために時間制限を設定できます。最短では <strong>10秒ルール</strong> の超高速対局も可能です！</p>
    
        <h3>勝利条件</h3>
        <ul>
            <li>ゲーム終了時に、自分の石の数が相手より多ければ勝利となります。同数の場合は引き分けです。</li>
            <li>時間制限のある対局では、相手が時間切れになった場合も勝利となります</li>
            <li>オンライン対戦では、「投了」ボタンが使えます。相手が投了した場合も、自分の勝利となります</li>
        </ul>
    </section>
    
    <section id="strategy">
        <h2>戦略のポイント</h2>
        <ul>
            <li><strong>角を狙え！</strong> - 角の石はひっくり返されることがないため、ゲームを有利に進められます</li>
            <li><strong>相手の手を制限しよう！</strong> - 相手が打ちたい場所に打てないように「合法手」を減らす戦略も強力です！</li>
        </ul>
    </section>
    
    <section id="features">
        <h2>このサイトの特徴</h2>
        <ul>
            <li><strong>URLによる対局の共有</strong> - 現在の盤面をURLで簡単にシェア！簡単にオンライン対戦の相手を募ったり、他のプレイヤーと棋譜を共有したりできます。</li>
            <li><strong>レベル別AI対戦</strong> - 初級から上級まで、強さの異なるAIと対戦できます。</li>
            <li><strong>音声効果</strong> - 石を置く音や対局終了時の効果音、オンライン対戦で相手が入室した時の通知音をオン/オフできます。</li>
            <li><strong>オンライン対戦</strong> - 友達とリアルタイムで対戦！観戦モードも搭載しています。</li>
        </ul>
    </section>
        <div class="credit">
            <!--copyright-->
            © 2024~ / 
            このオセロ盤では、多くの人にとって読みやすいユニバーサルデザインフォントを利用しています
        </div>
    </div>
    <audio id="placeStoneSound" src="{% static 'game/sounds/place-stone.mp3' %}" preload="auto"></audio>
    <audio id="victorySound" src="{% static 'game/sounds/victory.mp3' %}" preload="auto"></audio>
    <audio id="defeatSound" src="{% static 'game/sounds/defeat.mp3' %}" preload="auto"></audio>
    <audio id="warningSound" src="{% static 'game/sounds/warning.mp3' %}" preload="auto"></audio>
    <audio id="playerJoin" src="{% static 'game/sounds/playerJoin.mp3' %}" preload="auto"></audio>
</body>

<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register("{% static 'game/sw.js' %}")
        .then(registration => console.log("Service Worker registered:", registration))
        .catch(error => console.log("Service Worker registration failed:", error));
    }
</script>
</html>